<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Tetris Battle</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="app">
        <!-- Main Menu -->
        <div class="menu-container active" id="mainMenu">
            <div class="menu-content">
                <h1 class="game-title">üéÆ TETRIS BATTLE üéÆ</h1>
                
                <div class="game-modes">
                    <button class="mode-btn" data-mode="single" id="singlePlayerBtn">
                        <div class="mode-icon">üéØ</div>
                        <div class="mode-title">Single Player</div>
                        <div class="mode-desc">Classic Tetris</div>
                    </button>
                    
                    <button class="mode-btn" data-mode="battle" id="battleModeBtn">
                        <div class="mode-icon">‚öîÔ∏è</div>
                        <div class="mode-title">1 vs 1 Battle</div>
                        <div class="mode-desc">Online multiplayer</div>
                    </button>
                    
                    <button class="mode-btn" data-mode="multi" id="multiModeBtn">
                        <div class="mode-icon">üë•</div>
                        <div class="mode-title">4 Player Battle</div>
                        <div class="mode-desc">Multi-player arena</div>
                    </button>
                    
                    <button class="mode-btn" data-mode="settings" id="settingsBtn">
                        <div class="mode-icon">‚öôÔ∏è</div>
                        <div class="mode-title">Settings</div>
                        <div class="mode-desc">Game configuration</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Room Selection Menu -->
        <div class="menu-container" id="roomMenu">
            <div class="menu-content">
                <h1 class="menu-title">üè† Multiplayer Rooms</h1>
                
                <div class="room-options">
                    <div class="option-group">
                        <h3>Create New Room</h3>
                        <div class="input-group">
                            <input type="text" id="roomNameInput" placeholder="Room Name" maxlength="20">
                            <select id="maxPlayersSelect">
                                <option value="2">2 Players</option>
                                <option value="4" selected>4 Players</option>
                            </select>
                        </div>
                        <button class="btn primary" id="createRoomBtn">Create Room</button>
                    </div>
                    
                    <div class="option-group">
                        <h3>Join Existing Room</h3>
                        <div class="input-group">
                            <input type="text" id="roomIdInput" placeholder="Room ID">
                            <input type="text" id="playerNameInput" placeholder="Your Name" maxlength="15">
                        </div>
                        <button class="btn primary" id="joinRoomBtn">Join Room</button>
                    </div>
                    
                    <div class="option-group">
                        <h3>Quick Match</h3>
                        <p>Join any available room automatically</p>
                        <button class="btn success" id="quickMatchBtn">Quick Match</button>
                    </div>
                </div>
                
                <div class="menu-footer">
                    <button class="btn secondary" id="backToMainBtn">‚Üê Back to Main Menu</button>
                </div>
            </div>
        </div>

        <!-- Room Waiting Screen -->
        <div class="menu-container" id="waitingRoom">
            <div class="menu-content">
                <h1 class="menu-title">üéÆ Room: <span id="currentRoomName">-</span></h1>
                <p class="room-id">Room ID: <span id="currentRoomId">-</span></p>
                
                <div class="players-list">
                    <h3>Players (<span id="playerCount">0</span>/<span id="maxPlayers">4</span>)</h3>
                    <div class="players-grid" id="playersGrid">
                        <!-- Players will be added here dynamically -->
                    </div>
                </div>
                
                <div class="room-settings">
                    <h3>Game Settings</h3>
                    <div class="setting-item">
                        <label>Items Enabled</label>
                        <input type="checkbox" id="itemsEnabled" checked>
                    </div>
                    <div class="setting-item">
                        <label>Starting Level</label>
                        <select id="startLevel">
                            <option value="1" selected>1</option>
                            <option value="5">5</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                </div>
                
                <div class="room-actions">
                    <button class="btn primary" id="startGameBtn" style="display: none;">Start Game</button>
                    <button class="btn danger" id="leaveRoomBtn">Leave Room</button>
                </div>
                
                <div class="connection-status">
                    <span id="connectionStatus">Connecting...</span>
                </div>
            </div>
        </div>

        <!-- Game Container -->
        <div class="game-container" id="gameContainer">
            <!-- Left Panel -->
            <div class="left-panel">
                <div class="game-info">
                    <div class="stat-box">
                        <h3>Score</h3>
                        <div class="stat-value" id="score">0</div>
                    </div>
                    
                    <div class="stat-box">
                        <h3>Level</h3>
                        <div class="stat-value" id="level">1</div>
                    </div>
                    
                    <div class="stat-box">
                        <h3>Lines</h3>
                        <div class="stat-value" id="lines">0</div>
                    </div>
                    
                    <div class="next-piece">
                        <h3>Next</h3>
                        <canvas id="nextCanvas" width="120" height="120"></canvas>
                    </div>
                    
                    <div class="hold-piece">
                        <h3>Hold</h3>
                        <canvas id="holdCanvas" width="120" height="120"></canvas>
                    </div>
                </div>
            </div>

            <!-- Main Game Board -->
            <div class="center-panel">
                <div class="game-board">
                    <canvas id="gameCanvas" width="300" height="600"></canvas>
                    
                    <!-- Game Over Overlay -->
                    <div class="game-over" id="gameOverlay" style="display: none;">
                        <div class="overlay-content">
                            <h2>Game Over</h2>
                            <p>Final Score: <span id="finalScore">0</span></p>
                            <div class="overlay-buttons">
                                <button class="btn primary" id="restartBtn">Play Again</button>
                                <button class="btn secondary" id="menuBtn">Main Menu</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pause Overlay -->
                    <div class="pause-overlay" id="pauseOverlay" style="display: none;">
                        <div class="overlay-content">
                            <h2>Paused</h2>
                            <p>Press P to resume</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel -->
            <div class="right-panel">
                <!-- Battle Items (only visible in multiplayer) -->
                <div class="battle-items" id="battleItems" style="display: none;">
                    <h3>Battle Items</h3>
                    <div class="items-grid">
                        <div class="item-slot" data-item="line-clear">
                            <div class="item-icon">üí•</div>
                            <div class="item-name">Line Clear</div>
                            <div class="item-count">0</div>
                        </div>
                        <div class="item-slot" data-item="block-bomb">
                            <div class="item-icon">üí£</div>
                            <div class="item-name">Block Bomb</div>
                            <div class="item-count">0</div>
                        </div>
                        <div class="item-slot" data-item="speed-up">
                            <div class="item-icon">‚ö°</div>
                            <div class="item-name">Speed Up</div>
                            <div class="item-count">0</div>
                        </div>
                        <div class="item-slot" data-item="shuffle">
                            <div class="item-icon">üîÄ</div>
                            <div class="item-name">Shuffle</div>
                            <div class="item-count">0</div>
                        </div>
                    </div>
                </div>

                <!-- Opponent Boards (only visible in multiplayer) -->
                <div class="opponent-boards" id="opponentBoards" style="display: none;">
                    <h3>Opponents</h3>
                    <div class="opponents-grid" id="opponentsGrid">
                        <!-- Opponent boards will be dynamically created -->
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="controls-info">
                    <h3>Controls</h3>
                    <div class="control-item">
                        <span>Move</span>
                        <span class="key">‚Üê ‚Üí</span>
                    </div>
                    <div class="control-item">
                        <span>Rotate</span>
                        <span class="key">‚Üë Z X</span>
                    </div>
                    <div class="control-item">
                        <span>Drop</span>
                        <span class="key">‚Üì Space</span>
                    </div>
                    <div class="control-item">
                        <span>Hold</span>
                        <span class="key">C</span>
                    </div>
                    <div class="control-item">
                        <span>Pause</span>
                        <span class="key">P</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Network Status -->
        <div class="network-status" id="networkStatus">
            <div class="status-indicator" id="statusIndicator">‚óè</div>
            <span id="statusText">Offline</span>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
</body>
</html>